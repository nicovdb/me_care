<%= simple_form_for webinar do |f| %>
  <div data-controller="photo-preview">
    <div class="mt-4">
      <%= f.input :speaker_picture, as: :file, wrapper_html: { class: "mb-0"}, input_html: { class: 'd-none', data: { action: "change->photo-preview#display", target:"photo-preview.avatarInput" } }, label: "Photo de l'intervenant(e)*" %>
    </div>
    <div class="mb-3">
      <%= image_tag "", width: 300, class: "d-none avatar avatar-xl cursor-pointer", data: { target: "photo-preview.photoPreview", action: "click->photo-preview#clickInput" } %>

      <% if webinar.speaker_picture.attached? %>
        <%= cl_image_tag webinar.speaker_picture.key, width: 120, height: 120, crop: :fill, quality: :auto, fetch_format: :auto, class: "avatar avatar-xl cursor-pointer mr-3", data: { target: "photo-preview.currentAvatar", action: "click->photo-preview#clickInput" } %>
      <% else %>
        <%= cl_image_tag "avatar/avatar_default", width: 120, height: 120, crop: :fill, quality: :auto, fetch_format: :auto, class: "avatar avatar-xl cursor-pointer", data: { target: "photo-preview.currentAvatar", action: "click->photo-preview#clickInput" } %>
      <% end %>
    </div>
  </div>


  <%= f.input :speaker_name, label: t('.speaker_name') %>
  <%= f.input :title, label: t('.title') %>
  <%= f.input :start_at, label: t('.start_at') %>
  <%= f.input :category, collection: Webinar.categories.keys.collect { |m| [t("webinar.#{m.downcase}"), m] }, label: t('.category') %>



  <%= f.input :description, as: :rich_text_area, label: t('.description'), placeholder: "Description", class: 'form-control' %>
  <%= f.submit "Confirmer et publier le live", class: 'btn btn-primary btn-ee w-100 mb-4' %>
<% end %>

